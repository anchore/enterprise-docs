{{/* Link directly to documentation etc., if possible. */}}

{{ if eq .Hugo.Environment "production" }}
<script>
function populateDropDown() {
	var dropDown = document.getElementById("version-dropdown");
	var fetchPath = document.location.href.replace(document.location.pathname, "/versions.json");
	console.lgo("Fetching " + fetchPath);
	fetch(fetchPath)
			.then(function (response) {
				var versionObj = response.json();
				var inner = "";
				var verstr = "";
				for (i = 0; i < versionObj.length; i++) {
					var is_current = versionObj[i].current || false;

					if (is_current) {
						verstr = versionObj[i].version + " (current)";
						inner += "<a class=\"dropdown-item\" href=\"/current/\"/>" + verstr + "</a>";
					} else {
						verstr = versionObj[i].version;
						inner += "<a class=\"dropdown-item\" href=\"/" + verstr + "/\"/>" + verstr + "</a>";
					}
				}
				dropDown.innerHTML = inner;
			});

}
</script>
{{ end }}

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="populateDropDown()">
	{{ .Site.Data.versions.this_version }}
</a>

<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink" id="version-dropdown">
</div>


